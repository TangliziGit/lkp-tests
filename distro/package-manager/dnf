#!/bin/bash

ospkg_update()
{
	support_repo_epel
}

ospkg_install()
{
	local pkg nopkgs err
	for pkg
	do
		nopkgs=$(rpm --query $pkg | awk '{print $2}')
		[[ -n $nopkgs ]] || continue
		$SUDO yum install -y -q $nopkgs || err=$?
	done

	return $err
}

support_repo_epel()
{
	[ ${_system_name_lowercase} == "centos" ] || return 0

	if ! rpm -q epel-release >/dev/null; then
		yum install -y epel-release >/dev/null 2>&1
	fi

	if [ ${_system_name_lowercase} == "openeuler" ]; then
		yum makecache timer >/dev/null
	else
		yum makecache fast >/dev/null
	fi
}
